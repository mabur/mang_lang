result@{
    input =
"A Y
B X
C Z"
    OPPONENT_ROCK = 'A'
    OPPONENT_PAPER = 'B'
    OPPONENT_SCISSORS = 'C'
    YOU_ROCK = 'X'
    YOU_PAPER = 'Y'
    YOU_SCISSORS = 'Z'
    parse_round = in round out (first!round third!round)
    score_round = in (opponent you) out is you
        YOU_ROCK then
            is opponent OPPONENT_ROCK then 4 OPPONENT_PAPER then 1 OPPONENT_SCISSORS then 7 else -inf
        YOU_PAPER then
            is opponent OPPONENT_ROCK then 8 OPPONENT_PAPER then 5 OPPONENT_SCISSORS then 2 else -inf
        YOU_SCISSORS then
            is opponent OPPONENT_ROCK then 3 OPPONENT_PAPER then 9 OPPONENT_SCISSORS then 6 else -inf
        else -inf
    rounds = map_stack!(parse_round split!(newline input))
    scores = map_stack!(score_round rounds)
    result = sum!scores
}
